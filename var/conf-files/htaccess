# set the default url for the directory
RedirectMatch ^/biopython/$ /biopython/trac

# auto-rewrites file to file.wsgi if file.wsgi exists
AddHandler wsgi-script .wsgi

# set the (default) mod_wsgi.process_group
SetEnv WSGI_PGRP biopython-dev

# set a different mod_wsgi.process_group for the production app only
RewriteCond $0 ^rna-seqlyze.wsgi
RewriteRule .* - [E=WSGI_PGRP:biopython]

# turn on mod_rewrite features
RewriteEngine on

# only allow access to a handful of scripts in here
# anything else doesn't exist (backup copies, .htaccess, etc.)
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond $0 !^$
RewriteCond $0 !^trac.wsgi
RewriteCond $0 !^traclogin.wsgi
RewriteCond $0 !^rna-seqlyze.wsgi
# FIXME: delete the next 2 lines in a production environment
RewriteCond $0 !^debug.wsgi
RewriteCond $0 !^rna-seqlyze-dev.wsgi
RewriteRule .* - [R=404]

# pass-through requests for buildbot/* paths to the buildbot server
RewriteRule ^buildbot/(.*) http://localhost:8010/$1 [QSA,P]

# handle trac login / logount
#  [R] -> issue a real 302 redirect
#  [L] -> stop processing RewriteRules
RewriteRule ^trac.wsgi/login$ /biopython/traclogin [R,L]
RewriteRule ^traclogin.wsgi/logout$ /biopython/trac [R,L]

<Files 'traclogin'>
        AuthUserFile @@WEBDIR@@/.htpasswd.trac
        AuthName "Enter Password"
        AuthType Basic
        Require valid-user
</Files>
