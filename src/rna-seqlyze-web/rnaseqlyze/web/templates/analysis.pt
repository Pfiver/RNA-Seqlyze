<tal:block metal:use-macro="base">

  <tal:block metal:fill-slot="menu-items">
    <ul id="page-nav" class="nav nav-tabs nav-stacked">
      <li><a href="#input">Input</a></li>
      <li><a href="#processing">Processing</a></li>
      <li><a href="#results">Results</a></li>
    </ul>
  </tal:block>

  <tal:block metal:fill-slot="content">

    <div class="page-header">
      <h1>Analysis ${analysis.id}<br>
        <small>created
            on <span class="date">${analysis.creation_date.strftime("%Y-%m-%d %H:%M")} UTC</span>
            by <span class="username">${analysis.owner.name}</span>
        </small>
      </h1>
    </div>

    <h2 id="input">Input</h2>
    <div class="form-horizontal">
      <h3 id="shortreads">Short Reads</h3>
      <div class="control-group">
        <label for="inputfileInput" class="control-label">SRA or FASTQ File</label>
        <div class="controls entered-values">
          <strong>${analysis.inputfile_name}</strong>
        </div>
      </div>
      <div class="control-group">
        <label for="strandspecificInput" class="control-label">strand-specific</label>
        <div class="controls entered-values">
          <strong>${analysis.strandspecific and 'True' or 'False'}</strong>
        </div>
      </div>
      <div class="control-group">
        <label for="pairendedInput" class="control-label">pair-ended reads</label>
        <div class="controls entered-values">
          <strong>${analysis.pairended and 'True' or 'False'}</strong>
        </div>
      </div>
      <div id="pairendlenControls" class="control-group" tal:condition="analysis.pairended">
        <label for="pairendlenInput" class="control-label">fragment length</label>
        <div class="controls entered-values">
          <strong>${analysis.pairendlen}</strong>
        </div>
      </div>
      <h3>Organism</h3>
      <div class="control-group">
      <tal:block tal:switch="analysis.genbankfile_name == None">
      <tal:block tal:case="True">
        <label class="control-label">Accession Number</label>
        <div class="controls entered-values">
          <strong>${analysis.org_accession}</strong>
        </div>
      </tal:block>
      <tal:block tal:case="False">
        <label class="control-label">Genebank File</label>
        <div class="controls entered-values">
          <strong>${analysis.genbankfile_name}</strong>
          <p class="help-block">Nucleotide Sequence in Genebank format</p>
        </div>
      </tal:block>
      </tal:block>
      </div>
    </div>

<!--!
     \_____________________________________________________________________
     /                                                                     \
            This part is dynamically updated using backbone.js              \
            __________________________________________________               -->


    <h2 id="processing">Processing</h2>

      <h3>Input analysis</h3>
      <div id="input-type"></div>
      <script type="text/template" id="tpl-input-type">
        <ul>Type of input:
              <strong>{inputfile_type}</strong>
              <pre>{inputfile_header}</pre>
        </ul>
      </script>

      <h3>Log files</h3>
      <ul id="logfile-list"></ul>
      <script type="text/template" id="tpl-logfile-list-item">
        <li><a href="${relpath('files')}/{path}">{path}</a></li>
      </script>

    <h2 id="results">Results</h2>

    <ul id="results-list"></ul>
    <script type="text/template" id="tpl-results-list-hg-url">
      <li>Link to BAM Track in UCSC Browser
      <a href="{hg_url}">{hg_url}</a>
      </li>
    </script>


<!--!.______________________________________________________________________,-->

  </tal:block>

  <tal:block metal:fill-slot="footer">
    <script src="${path('js/underscore-min.js')}"></script>
    <script src="${path('js/backbone-min.js')}"></script>
    <script src="${path('js/rnaseqlyze-analysis.js')}"></script>
  </tal:block>

</tal:block>
